# TODO: Improve Test Coverage with Behavioral Testing

- [x] Setup testing environment
    - [x] Add `pytest`, `pytest-asyncio`, and `httpx` to `pyproject.toml`
    - [x] Create `tests/` directory and `conftest.py`
- [x] Implement Database Integration Tests
    - [x] Test task creation (`save_task`)
    - [x] Test task updates (`update_task`)
    - [x] Test database initialization (`init_db`)
- [x] Implement CLI Functional Tests
    - [x] Test `list` command output
    - [x] Test `show` command with valid/invalid IDs
    - [x] Test `run` command argument parsing
- [x] Implement Behavioral API Tests
    - [x] Create a local Fake Gemini Server (SSE + Polling)
    - [x] Test `run_research` streaming (thoughts + content)
    - [x] Test `run_research` polling fallback
    - [x] Test error handling (API failures, network timeouts)
- [x] Finalize and Verify
    - [x] Ensure all tests pass with `uv run pytest`
    - [x] Update `GEMINI.md` with new test instructions